"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.usersRoutes = void 0;
const express_1 = require("express");
const CreateUserContoller_1 = require("../controllers/CreateUserContoller");
const AuthenticateUserController_1 = require("../controllers/AuthenticateUserController");
const ensureAuthenticated_1 = require("../middlewares/ensureAuthenticated");
const CreateLinkController_1 = require("../controllers/CreateLinkController");
const ListAllUsersController_1 = require("../controllers/ListAllUsersController");
const ListAllLinksOfUsersController_1 = require("../controllers/ListAllLinksOfUsersController");
const UserProfileController_1 = require("../controllers/UserProfileController");
const UpdateAvatarController_1 = require("../controllers/UpdateAvatarController");
const multer_1 = __importDefault(require("multer"));
const upload_1 = __importDefault(require("../config/upload"));
const UpdateLinkController_1 = require("../controllers/UpdateLinkController");
const DeleteLinkController_1 = require("../controllers/DeleteLinkController");
const ListUserInfoController_1 = require("../controllers/ListUserInfoController");
exports.usersRoutes = (0, express_1.Router)();
const uploadAvatar = (0, multer_1.default)(upload_1.default);
const createUserController = new CreateUserContoller_1.CreateUserContoller();
const authenticateUserController = new AuthenticateUserController_1.AuthenticateUserController();
const createLinkController = new CreateLinkController_1.CreateLinkController();
const listAllUsersController = new ListAllUsersController_1.ListAllUsersController();
const listAlLinksOfUsersController = new ListAllLinksOfUsersController_1.ListAllLinksOfUsersController();
const userProfileController = new UserProfileController_1.UserProfileController();
const updateUserAvatarController = new UpdateAvatarController_1.UpdateUserAvatarController();
const updateLinkController = new UpdateLinkController_1.UpdateLinkController();
const deleteLinkController = new DeleteLinkController_1.DeleteLinkController();
const listUserInfoController = new ListUserInfoController_1.ListUserInfoController();
exports.usersRoutes.post('/', createUserController.handle);
exports.usersRoutes.post('/sessions/auth', authenticateUserController.handle);
exports.usersRoutes.get('/profile/:username', ensureAuthenticated_1.ensureAuthenticated, listUserInfoController.handle);
exports.usersRoutes.get('/', listAllUsersController.handle);
exports.usersRoutes.get('/:username', userProfileController.handle);
exports.usersRoutes.post('/links', ensureAuthenticated_1.ensureAuthenticated, createLinkController.handle);
exports.usersRoutes.get('/:username/links', listAlLinksOfUsersController.handle);
exports.usersRoutes.put('/:username/avatar', uploadAvatar.single('avatar'), ensureAuthenticated_1.ensureAuthenticated, updateUserAvatarController.handle);
exports.usersRoutes.patch('/links/:id', ensureAuthenticated_1.ensureAuthenticated, updateLinkController.handle);
exports.usersRoutes.delete('/links/:id', ensureAuthenticated_1.ensureAuthenticated, deleteLinkController.handle);
